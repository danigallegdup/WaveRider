extends Node
'''
AUTOLOAD: MusicLoader

This script is an autoload, meaning it can be accessed from any other script at will.

The methods in this script will load song data for song selection menu to present, and will load
the selected song into the game scene.

Song data will have the following layout:
	{
		"name": "Display Name of Song",
		"artist": "Display Name of Artist",
		"genre": "Genre",
		"data": {
			"file_name": "my_song_file.wav",
			"file_checksum": "abc123...xyz",
			"duration": 192.0,
			"tempo_beats": [0.0, 0.1, 0.2],
			"obstacles": [0.5, 0.9, 1.2],
			"coins": [0.2, 0.4, 0.6, 0.8]
		}
	}
'''
const DEFAULT_FILE_NAME = "<default>"
const DEFAULT_FILE_CHECKSUM = "000000"
const DEFAULT_SONGS = [
	{
		"name": "Electro Cabello",
		"artist": "Kevin MacLeod",
		"genre": "Disco",
		"data": {
			"file_name": DEFAULT_FILE_NAME,
			"file_checksum": DEFAULT_FILE_CHECKSUM,
			"duration": 190.82,
			"tempo_beats": [0.0,0.406,0.511,0.789,1.022,1.533,1.811,2.055,2.566,3.077,3.332,3.587,3.843,4.098,4.505,4.609,4.888,5.12,5.642,5.909,6.049,6.153,6.548,6.664,6.931,7.175,7.43,7.686,7.941,8.197,8.719,9.23,9.741,10.252,10.762,11.041,11.273,11.54,11.796,12.051,12.307,12.701,12.817,13.084,13.328,13.839,14.118,14.257,14.362,14.768,14.872,15.383,15.639,15.894,16.149,16.405,16.927,17.438,17.949,18.46,18.971,19.482,19.737,19.992,20.259,20.515,21.026,21.293,21.537,21.931,22.047,22.558,23.069,23.591,23.847,24.102,24.358,24.613,25.124,25.635,26.157,26.668,27.179,27.458,27.69,27.945,28.201,28.456,28.711,29.234,29.501,29.745,30.256,30.766,31.277,31.544,31.788,32.044,32.311,32.566,32.821,33.228,33.332,33.843,34.354,34.865,35.26,35.387,35.898,36.153,36.409,36.664,36.92,37.431,37.941,38.464,38.731,38.859,38.975,39.486,39.996,40.252,40.507,40.774,41.018,41.54,41.831,42.051,42.562,42.841,43.073,43.479,43.584,44.095,44.362,44.617,44.873,45.128,45.639,45.906,46.15,46.66,47.171,48.982,49.226,49.644,49.749,50.004,50.248,50.77,51.281,51.792,52.059,52.303,52.558,52.814,53.081,53.336,53.847,54.102,54.358,54.869,55.38,55.647,55.89,56.157,56.413,56.668,56.924,57.179,57.435,57.945,58.212,58.456,58.967,59.49,60.0,60.256,60.511,60.767,61.022,61.277,61.533,62.055,62.311,62.566,63.077,63.507,63.611,63.843,64.099,64.366,64.61,64.865,65.12,65.387,65.643,66.038,66.154,66.409,66.56,66.664,66.92,67.175,67.442,67.686,68.081,68.197,68.464,68.615,68.719,68.975,69.23,69.486,69.741,70.147,70.252,70.519,70.763,71.03,71.274,71.541,71.796,72.202,72.307,72.562,72.725,72.829,73.073,73.329,73.584,73.839,74.246,74.362,74.617,74.873,75.128,75.384,75.894,76.405,76.672,76.916,77.183,77.439,77.694,77.949,78.1,78.344,78.46,78.727,78.867,78.971,79.482,79.993,80.399,80.515,81.026,81.281,81.537,81.792,82.048,82.454,82.559,82.826,83.081,83.592,84.103,84.614,85.124,85.38,85.635,85.902,86.158,86.668,87.179,87.458,87.69,88.201,88.456,88.712,88.979,89.234,89.362,89.49,89.617,89.745,90.767,91.278,91.788,92.056,92.299,92.566,92.822,93.077,93.333,93.588,93.843,94.099,94.354,94.865,95.132,95.388,95.898,96.154,96.316,96.421,96.665,96.92,97.187,97.431,97.686,97.953,98.209,98.464,98.871,98.975,99.242,99.486,99.997,100.275,100.508,100.775,101.018,101.285,101.541,101.796,102.052,102.307,102.563,102.969,103.073,103.352,103.584,104.095,104.362,104.618,104.873,105.128,105.384,105.639,105.895,106.15,106.405,106.661,107.067,107.183,107.474,107.694,108.205,108.484,108.716,109.111,109.227,109.738,109.993,110.248,110.515,110.771,111.282,111.792,112.303,112.814,113.325,113.847,114.103,114.358,114.614,114.869,115.38,115.67,115.891,116.402,116.68,116.924,117.319,117.435,117.946,118.201,118.457,118.712,118.967,119.49,120.001,120.512,120.779,120.93,121.034,121.533,122.044,122.3,122.567,122.822,123.077,123.588,124.099,124.61,125.132,125.643,126.154,126.409,126.665,126.92,127.176,127.582,127.687,127.965,128.209,128.592,128.72,128.987,129.231,129.637,129.741,130.009,130.252,130.508,130.763,131.03,131.274,131.692,131.796,132.075,132.307,132.818,133.097,133.329,133.84,134.107,134.362,134.618,134.873,135.129,135.384,135.895,136.162,136.406,136.916,137.439,137.95,138.461,138.716,138.971,139.227,139.482,140.005,140.272,140.516,141.026,141.537,142.048,142.559,142.814,143.07,143.337,143.592,144.103,144.614,145.125,145.636,146.146,146.669,146.924,147.18,147.435,147.691,148.201,148.712,149.223,149.745,150.256,150.535,150.767,151.023,151.278,151.533,151.789,152.311,152.822,153.333,153.844,155.156,155.899,156.154,156.305,156.41,156.688,156.92,157.431,157.698,157.942,158.209,158.465,158.975,159.231,159.486,159.742,159.997,160.264,160.508,160.775,161.03,161.541,161.797,162.052,162.563,162.818,163.074,163.329,163.585,163.84,164.095,164.362,164.618,165.129,165.64,165.907,166.15,166.417,166.661,167.184,167.439,167.695,167.95,168.205,168.716,168.983,169.227,169.494,169.738,170.249,170.516,170.771,171.027,171.282,171.537,171.793,172.048,172.304,172.815,173.082,173.325,173.848,174.359,174.869,175.137,175.38,175.636,175.891,176.158,176.414,176.924,177.18,177.435,177.946,178.457,178.724,178.968,179.235,179.49,179.746,180.001,180.257,180.512,181.023,181.29,181.534,182.044,182.323,182.567,183.078,183.333,183.589,183.844,184.099,184.355,184.61,185.133,185.388,185.644,186.154,186.665,186.921,187.199,187.431,187.687],
			"obstacles": [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0],
			"coins": [0.5, 1.5, 2.0, 3.5],
			"default_resource_location": "res://Resources/DefaultMusic/Electro_Cabello.wav"
		}
	},
	{
		"name": "Indie Pop Catchy, Uplifting, Inspiring Indie Pop",
        "artist": "MagpieMusic",
        "genre": "Indie Pop",
		"data": {
			"file_name": DEFAULT_FILE_NAME,
			"file_checksum": DEFAULT_FILE_CHECKSUM,
			"duration": 84.088,
			"tempo_beats": [0.662,0.987,1.289,1.451,1.602,1.765,2.566,2.717,2.868,3.495,3.971,4.122,4.609,4.923,5.085,5.248,5.7,6.026,6.351,6.49,6.664,7.79,7.941,8.104,8.243,8.545,9.009,9.172,9.392,9.671,9.961,10.136,10.263,10.461,10.612,10.762,11.076,11.401,11.552,11.703,11.865,12.19,12.341,12.655,12.829,12.98,13.293,13.595,13.92,14.083,14.222,14.396,14.71,14.872,15.035,15.186,15.36,15.511,15.801,16.126,16.451,16.602,16.765,16.927,17.241,17.403,17.717,17.891,18.03,18.344,18.646,18.982,19.122,19.273,19.458,19.76,19.923,20.074,20.236,20.41,20.561,20.863,21.188,21.502,21.664,21.815,21.978,22.14,22.291,22.454,22.767,22.93,23.081,23.394,23.708,24.033,24.184,24.335,24.509,24.822,24.973,25.136,25.287,25.484,25.612,25.902,26.239,26.552,26.715,26.865,27.028,27.341,27.504,27.818,28.003,28.131,28.456,28.758,29.083,29.222,29.373,29.559,29.872,30.035,30.174,30.348,30.662,30.975,31.289,31.614,31.916,32.078,32.392,32.554,32.868,33.181,33.506,33.808,34.133,34.447,34.609,34.923,35.085,35.399,35.585,35.712,36.014,36.339,36.664,36.978,37.129,37.442,37.605,37.918,38.232,38.557,38.859,39.184,39.497,39.66,39.973,40.136,40.449,40.763,40.925,41.088,41.39,41.715,42.028,42.191,42.493,42.655,42.98,43.294,43.607,43.921,44.246,44.559,44.71,45.023,45.186,45.5,45.674,45.825,46.138,46.44,46.765,47.078,47.241,47.543,47.717,48.03,48.193,48.344,48.657,48.971,49.296,49.609,49.772,50.074,50.236,50.55,50.724,50.875,51.2,51.513,51.815,51.978,52.129,52.291,53.092,53.243,53.394,54.021,54.497,54.648,55.136,55.449,55.612,55.774,56.216,56.552,56.877,57.017,57.191,57.377,58.317,58.468,58.63,58.77,59.072,59.536,59.699,59.919,60.198,60.488,60.662,60.79,60.987,61.138,61.289,61.603,61.928,62.079,62.229,62.392,62.717,62.868,63.181,63.356,63.507,63.82,64.122,64.447,64.61,64.749,64.923,65.236,65.399,65.562,65.712,65.887,66.038,66.328,66.653,66.966,67.129,67.291,67.454,67.767,67.93,68.243,68.418,68.557,68.87,69.172,69.346,69.509,69.648,69.799,69.985,70.287,70.449,70.6,70.763,70.937,71.088,71.39,71.715,72.028,72.191,72.342,72.504,72.667,72.818,72.98,73.294,73.456,73.607,73.921,74.234,74.559,74.71,74.861,75.035,75.349,75.5,75.662,75.813,76.011,76.138,76.428,76.765,77.079,77.241,77.392,77.555,77.868,78.031,78.344,78.507,78.658,78.971,79.285,79.61,79.749,79.9,80.086,80.399,80.562,80.701,80.875,81.189,81.502,81.827],
			"obstacles": [],
			"coins": [],
			"url_ref": "https://pixabay.com/music/indie-pop-catchy-uplifting-inspiring-indie-pop-182349/",
			"default_resource_location": "res://Resources/DefaultMusic/catchy-uplifting-inspiring-indie-pop-182349.wav"
		}
	},
	{
		"name": "Immersing Into Electro Swing",
        "artist": "Open-Music-for-Videos",
        "genre": "Acid Jazz / Electro Swing",
		"data": {
			"file_name": DEFAULT_FILE_NAME,
			"file_checksum": DEFAULT_FILE_CHECKSUM,
			"duration": 100.18,
			"tempo_beats": [0.035,0.534,0.917,2.868,3.239,5.573,7.918,8.197,9.079,9.857,12.19,16.242,16.347,16.66,16.916,17.496,17.798,18.088,18.332,18.669,18.808,19.249,19.551,19.83,20.41,20.712,20.991,21.293,21.583,21.827,22.163,22.744,22.976,23.324,23.603,23.905,24.497,24.787,25.078,25.368,25.484,25.658,25.786,25.96,26.157,26.262,26.54,26.819,27.144,27.411,27.713,27.992,28.108,28.282,28.572,28.874,29.153,29.455,29.733,30.035,30.314,30.43,30.616,30.894,31.219,31.486,32.067,32.357,32.647,32.787,32.949,33.228,33.53,33.82,34.11,34.319,34.424,34.691,34.818,34.981,35.271,35.492,35.596,35.863,36.142,36.734,37.303,37.523,37.895,38.185,38.475,38.766,39.056,39.358,39.636,39.845,39.95,40.217,40.53,40.797,41.39,41.68,41.97,42.098,42.272,42.551,42.852,43.131,43.433,43.607,43.712,44.013,44.199,44.304,44.42,44.594,44.803,44.907,45.012,45.174,45.465,45.697,46.045,46.347,46.626,46.753,46.928,47.206,47.508,47.787,48.089,48.379,48.669,48.959,49.25,49.54,50.12,50.701,51.003,51.304,60.337,60.604,60.825,61.196,61.498,61.777,62.067,62.357,62.659,62.845,62.949,63.077,63.205,63.437,63.541,63.82,64.099,64.691,64.981,65.271,65.411,65.585,65.852,66.154,66.432,66.734,67.013,67.315,67.593,67.895,68.185,68.487,68.766,68.975,69.091,69.346,69.637,69.927,70.055,70.229,70.507,70.74,71.088,71.39,71.68,71.97,72.086,72.26,72.388,72.562,72.76,72.864,73.143,73.421,73.747,74.002,74.315,74.582,74.71,74.884,75.175,75.302,75.476,75.755,76.057,76.336,76.637,76.916,77.032,77.218,77.497,77.822,78.089,78.669,78.959,79.25,79.389,79.552,79.83,80.132,80.411,80.713,80.922,81.026,81.293,81.421,81.583,81.874,82.094,82.199,82.466,82.744,83.058,83.325,83.557,83.905,84.126,84.497,84.788,85.078,85.368,85.658,85.949,86.239,86.448,86.552,86.819,87.133,87.4,87.632,87.992,88.282,88.573,88.7,88.874,89.153,89.455,89.734,90.035,90.21,90.314,90.616,90.802,90.906,91.022,91.196,91.405,91.51,91.614,91.777,92.067,92.299,92.648,92.949,93.228,93.344,93.53,93.809,94.11,94.389,94.691,94.981,95.271,95.562,95.864,96.142,96.723,97.303,97.605,97.884,98.104],
			"obstacles": [],
			"coins": [],
			"url_ref":"https://pixabay.com/music/acid-jazz-immersing-into-electro-swing-152574/",
			"default_resource_location": "res://Resources/DefaultMusic/immersing-into-electro-swing-152574.wav"
		}
	},
	{
		"name": "Indie Pop Catchy, Uplifting, Inspiring Indie Pop",
        "artist": "MagpieMusic",
        "genre": "Indie Pop",
		"data": {
			"file_name": DEFAULT_FILE_NAME,
			"file_checksum": DEFAULT_FILE_CHECKSUM,
			"duration": 136.594,
			"tempo_beats": [0.197,0.824,1.44,1.858,3.518,4.122,4.748,5.166,6.2,6.374,6.525,6.827,7.036,7.442,7.86,8.069,8.464,8.696,9.102,9.311,9.509,10.101,10.344,10.728,11.18,11.366,11.784,12.005,12.411,12.632,12.829,13.444,13.653,14.071,14.489,14.687,15.105,15.314,15.72,16.138,16.73,16.962,17.38,17.519,17.798,17.995,18.413,18.622,19.04,19.447,19.574,19.725,19.853,20.062,20.271,20.689,21.095,21.304,21.711,21.931,22.349,22.756,23.197,23.371,23.591,23.998,24.218,24.416,24.613,24.961,25.066,25.252,25.461,25.658,26.076,26.482,26.703,26.9,27.121,27.318,27.492,27.725,27.841,27.945,28.05,28.154,28.294,28.572,28.711,28.816,28.979,29.176,29.292,29.396,29.559,29.722,29.826,30.012,30.209,30.43,30.627,31.033,31.254,31.463,31.649,31.869,32.078,32.287,32.403,32.52,32.694,32.891,33.112,33.332,33.472,33.657,33.762,33.948,34.215,34.354,34.575,34.691,34.969,35.085,35.19,35.515,35.619,35.817,35.933,36.037,36.177,36.362,36.629,36.827,37.047,37.268,37.663,37.872,38.023,38.278,38.499,38.661,38.905,39.114,39.265,39.671,39.927,40.136,40.554,40.972,41.169,41.587,41.796,42.202,42.62,43.236,43.456,43.851,44.28,44.478,44.884,45.105,45.511,45.929,46.544,46.765,47.16,47.589,47.787,48.193,48.414,48.832,49.238,49.818,50.074,50.48,50.898,51.096,51.502,51.722,52.14,52.547,53.174,53.383,53.789,54.207,54.416,54.822,55.043,55.449,55.856,56.483,56.692,57.098,57.249,57.516,57.725,58.131,58.352,58.758,59.164,59.362,59.513,59.791,60.0,60.407,60.825,61.034,61.44,61.661,62.067,62.485,63.1,63.309,63.716,63.959,64.145,64.331,64.691,64.969,65.202,65.387,65.62,65.794,66.2,66.432,66.618,66.781,66.885,67.048,67.315,67.454,67.675,67.814,68.069,68.29,68.394,68.557,68.696,68.917,69.056,69.242,69.404,69.532,69.741,69.939,70.147,70.356,70.763,70.983,71.181,71.378,71.587,71.75,71.877,72.017,72.202,72.411,72.632,72.829,73.05,73.247,73.398,73.526,73.665,73.781,74.072,74.292,74.455,74.687,74.85,75.326,75.535,75.732,75.883,76.045,76.161,76.37,76.556,76.788,76.974,77.38,77.601,77.706,78.019,78.216,78.367,78.553,78.658,78.762,78.867,78.971,79.25,79.377,79.482,79.679,79.865,79.981,80.086,80.295,80.48,80.596,80.713,80.829,80.933,81.096,81.328,81.525,81.676,81.839,81.943,82.141,82.257,82.361,82.5,82.605,82.768,82.977,83.174,83.394,83.592,83.998,84.219,84.428,84.614,84.834,84.95,85.078,85.24,85.449,85.658,85.798,86.076,86.297,86.436,86.715,86.912,87.075,87.319,87.539,87.655,87.934,88.131,88.317,88.561,88.781,88.967,89.165,89.269,89.385,89.594,89.792,90.024,90.221,90.627,90.836,90.987,91.243,91.347,91.452,91.591,91.719,91.87,92.079,92.195,92.311,92.601,92.903,93.1,93.53,94.134,94.552,95.167,95.585,96.212,96.827,97.443,97.86,98.476,98.894,99.172,99.509,99.73,100.136,100.542,100.751,101.158,101.378,101.785,102.203,102.83,103.039,103.445,103.863,104.06,104.467,104.699,104.908,105.035,105.14,105.523,105.755,105.86,105.964,106.162,106.347,106.568,106.777,106.94,107.172,107.404,107.578,107.741,107.892,108.008,108.159,108.321,108.426,108.658,108.844,109.169,109.273,109.459,109.656,109.877,110.074,110.481,110.701,110.91,111.107,111.316,111.491,111.618,111.734,111.932,112.141,112.303,112.559,112.779,112.965,113.197,113.395,113.58,113.801,113.952,114.056,114.219,114.428,114.637,114.881,115.043,115.264,115.45,115.566,115.751,115.879,116.077,116.274,116.495,116.703,117.11,117.319,117.528,117.725,117.83,117.946,118.132,118.259,118.364,118.573,118.677,119.084,119.188,119.397,119.536,119.745,119.85,120.012,120.221,120.419,120.639,120.779,121.046,121.173,121.278,121.382,121.545,121.661,121.87,122.067,122.369,122.497,122.706,122.903,123.101,123.252,123.728,123.948,124.145,124.343,124.563,124.714,124.877,124.981,125.167,125.388,125.597,125.724,125.829,126.015,126.2,126.433,126.63,127.036,127.257,127.42,127.675,127.861,128.081,128.29,128.499,128.685,128.871,129.01,129.115,129.335,129.521,129.753,129.939,130.345,130.577,130.763,130.891,130.995,131.181,131.39,131.495,131.599,131.727,131.831,131.936,132.272],
			"obstacles": [],
			"coins": [],
			"url_ref": "https://pixabay.com/music/indie-pop-catchy-uplifting-inspiring-indie-pop-182349/",
			"default_resource_location": "res://Resources/DefaultMusic/uplifting-and-energetic-indie-pop-305512.wav"
		}
	},

]
var song_library = DEFAULT_SONGS

var main_link: Node3D

func _ready():
	load_custom_songs()
	
	
# This method will read AppData to load any additional songs the user has processed
func load_custom_songs():
	# Read AppData
	# Modify song_library list
	pass
	
func play_song(song_data):
	if not main_link:
		print("ERROR: Main link was not initialized")
		return
	main_link.start_game(song_data)